if("undefined"===typeof React)var React=require("react");
(function(){function h(a){return"[object Array]"===Object.prototype.toString.call(a)}function k(a){return"undefined"===typeof a}function u(a){return"object"!==typeof a||"[object Array]"===Object.prototype.toString.call(a)?!1:!0}function b(a,c){if("string"===typeof a)if(~"warn debug error log info exception assert".split(" ").indexOf(a,0))console[a]("Flocks2 ["+a+"] "+c.toString());else console.log("Flocks2 [Unknown level] "+c.toString());else k(f.flocks2Config)?console.log("Flocks2 pre-config ["+
a.toString()+"] "+c.toString()):f.flocks2Config.log_level>=a&&console.log("Flocks2 ["+a.toString()+"] "+c.toString())}function n(){b(3," - Flocks2 attempting update");if(!v)return b(1," x Flocks2 skipped update: root is not initialized"),null;if(l)return b(1," x Flocks2 skipped update: lock count updateBlocks is non-zero"),null;if(!w(f))return b(0,"   ! Flocks2 rolling back update: handler rejected propset"),f=x,null;x=f;b(3,"   - Flocks2 update passed");React.render(React.createFactory(p)({flocks2context:f}),
document.body);b(3,"   - Flocks2 update complete; finalizing");y();return!0}function z(a,c){if("string"!==typeof a)throw c||"Argument must be a string";}function A(a,c){if(!u(a))throw c||"Argument must be a non-array object";}function q(a,c){b(3," - Flocks2 multi-set");if("string"===typeof a)z(a,"Flocks2 set/2 must take a string for its key"),f[a]=c,b(1,'   - Flocks2 setByKey "'+a+'"'),n();else throw"Flocks2 set/1,2 key must be a string or an array";}function B(a,c,d){var b;if(!h(a))throw"Path must be an array!";
if(0===a.length)return c;if(1===a.length)return b=c[a[0]],c[a[0]]=d,b;if(-1!==["string","number"].indexOf(typeof a[0]))return b=a.splice(1,Number.MAX_VALUE),B(b,c[a[0]],d)}function r(a,c){var b;if(!h(a))throw"path must be an array!";if(0===a.length)return c;if(1===a.length)return c[a[0]];if(-1!==["string","number"].indexOf(typeof a[0]))return b=a.splice(1,Number.MAX_VALUE),r(b,c[a[0]])}function C(a){console.log("ERROR: stub called!");A(a,"Flocks2 update/1 must take a plain object")}function F(){++l}
function D(){if(0>=l)throw"unlock()ed with no lock!";--l;n()}function t(a){var c=a.constructor(),b;if(null===a||"object"!==typeof a)return a;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c}function E(a){if(k(a))return[m];if(h(a)){if(~a.indexOf(m,0))return a;a=t(a);a.push(m);return a}throw"Original mixin list must be an array or undefined!";}var m,g,v=!1,l=0,p,w=function(a){return!0},y=function(){return!0},x={},f={};g={flocks2context:React.PropTypes.object};m={contextTypes:g,childContextTypes:g,
componentWillMount:function(){b(1," - Flocks2 component will mount: "+this.constructor.displayName);b(3,k(this.props.flocks2context)?"   - No F2 Context Prop":"   - F2 Context Prop found");b(3,k(this.context.flocks2context)?"   - No F2 Context":"   - F2 Context found");this.props.flocks2context&&(this.context.flocks2context=this.props.flocks2context);this.fupdate=function(a){return C(a)};this.fgetpath=function(a,b){return r(a,b)};this.fset=function(a,b){return q(a,b)};this.fsetpath=function(a,b){return q(a,
b)};this.flock=function(){++l};this.funlock=function(){return D()};this.fctx=this.context.flocks2context},getChildContext:function(){return this.context}};g={version:"0.15.11",plumbing:m,createClass:function(a){a.mixins=E(a.mixins);return React.createClass(a)},mount:function(a,c){var d=a||{},g=c||{},e=function(){console.log("ERROR: stub called!");n()},e={get:e,override:e,clear:e,get_path:r,set:q,set_path:B,update:C,lock:F,unlock:D};d.log_level=d.log_level||-1;p=d.control;g.flocks2Config=d;f=g;b(1,
"Flocks2 root creation begins");if(!p)throw"Flocks2 fatal error: must provide a control in create/2 FlocksConfig";d.handler&&(w=d.handler,b(3," - Flocks2 handler assigned"));d.finalizer&&(y=d.finalizer,b(3," - Flocks2 finalizer assigned"));d.preventAutoContext?b(2," - Flocks2 skipping auto-context"):(b(2," - Flocks2 engaging auto-context"),this.fctx=t(f));b(3,"Flocks2 creation finished; initializing");v=!0;n();b(3,"Flocks2 expose updater");this.fupd=e;this.fset=e.set;this.fgetpath=e.get_path;this.flock=
e.lock;this.funlock=e.unlock;this.fupdate=e.update;b(3,"Flocks2 initialization finished");return e},clone:t,isArray:h,isUndefined:k,isNonArrayObject:u,enforceString:z,enforceArray:function(a,b){if(!h(a))throw b||"Argument must be an array";},enforceNonArrayObject:A,atLeastFlocks:E};"undefined"!==typeof module?module.exports=g:window.flocks=g})();
