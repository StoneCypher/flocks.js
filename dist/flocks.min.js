if("undefined"===typeof React)var React=require("react");
(function(){function h(a){return"[object Array]"===Object.prototype.toString.call(a)}function l(a){return"undefined"===typeof a}function v(a){return"object"!==typeof a||"[object Array]"===Object.prototype.toString.call(a)?!1:!0}function b(a,c){if("string"===typeof a)if(~"warn debug error log info exception assert".split(" ").indexOf(a,0))console[a]("Flocks2 ["+a+"] "+c.toString());else console.log("Flocks2 [Unknown level] "+c.toString());else l(d.flocks2Config)?console.log("Flocks2 pre-config ["+
a.toString()+"] "+c.toString()):d.flocks2Config.log_level>=a&&console.log("Flocks2 ["+a.toString()+"] "+c.toString())}function m(){b(3," - Flocks2 attempting update");if(!w)return b(1," x Flocks2 skipped update: root is not initialized"),null;if(n)return b(1," x Flocks2 skipped update: lock count updateBlocks is non-zero"),null;if(!x(d))return b(0,"   ! Flocks2 rolling back update: handler rejected propset"),d=e,null;e=d;b(3,"   - Flocks2 update passed");"detatched"===e.flocks2Config.target?b(3,"   - Flocks2 skipping render because explicitly detatched"):
(b(3,"   - Flocks2 rendering"),React.render(React.createFactory(q)({flocks2context:d}),e.flocks2Config.target));b(3,"   - Flocks2 update complete; finalizing");y();return!0}function z(a,c){if("string"!==typeof a)throw c||"Argument must be a string";}function A(a,c){if(!h(a))throw c||"Argument must be an array";}function B(a,c){if(!v(a))throw c||"Argument must be a non-array object";}function C(a,c,b){var d;if(!h(a))throw"Path must be an array!";if(0===a.length)return c;if(1===a.length)return d=c[a[0]],
c[a[0]]=b,d;if(-1!==["string","number"].indexOf(typeof a[0]))return d=a.splice(1,Number.MAX_VALUE),C(d,c[a[0]],b)}function D(a,c){A(a,"Flocks2 setByPathh/2 must take an array for its key");b(1,'   - Flocks2 setByPath "'+a.join("|")+'"');C(a,d,c);m()}function r(a,c){b(3," - Flocks2 multi-set");if("string"===typeof a)z(a,"Flocks2 set/2 must take a string for its key"),d[a]=c,b(1,'   - Flocks2 setByKey "'+a+'"'),m();else{if(h(a))return D(a,c);throw"Flocks2 set/1,2 key must be a string or an array";}}
function E(a){b(3," - Flocks2 multi-get");if("string"===typeof a)return e[a];if(h(a))return t(a);throw"Flocks2 get/1 key must be a string or an array";}function J(a){return e[a]}function F(a,c){var b;if(!h(a))throw"path must be an array!";if(0===a.length)return c;if(1===a.length)return c[a[0]];if(-1!==["string","number"].indexOf(typeof a[0]))return b=a.splice(1,Number.MAX_VALUE),F(b,c[a[0]])}function t(a){return F(a,e)}function G(a){console.log("ERROR: stub called!");B(a,"Flocks2 update/1 must take a plain object")}
function K(){++n}function H(){if(0>=n)throw"unlock()ed with no lock!";--n;m()}function u(a){var c=a.constructor(),b;if(null===a||"object"!==typeof a)return a;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c}function I(a){if(l(a))return[p];if(h(a)){if(~a.indexOf(p,0))return a;a=u(a);a.push(p);return a}throw"Original mixin list must be an array or undefined!";}var p,k,w=!1,n=0,q,x=function(a){return!0},y=function(){return!0},e={},d={};k={flocks2context:React.PropTypes.object};p={contextTypes:k,
childContextTypes:k,componentWillMount:function(){b(1," - Flocks2 component will mount: "+this.constructor.displayName);b(3,l(this.props.flocks2context)?"   - No F2 Context Prop":"   - F2 Context Prop found");b(3,l(this.context.flocks2context)?"   - No F2 Context":"   - F2 Context found");this.props.flocks2context&&(this.context.flocks2context=this.props.flocks2context);this.fupdate=function(a){return G(a)};this.fget=function(a){return E(a)};this.fgetkey=function(a){return e[a]};this.fgetpath=function(a){return t(a)};
this.fset=function(a,b){return r(a,b)};this.fsetpath=function(a,b){return r(a,b)};this.flock=function(){++n};this.funlock=function(){return H()};this.fctx=this.context.flocks2context},getChildContext:function(){return this.context}};k={version:"1.4.0",createClass:function(a){a.mixins=I(a.mixins);return React.createClass(a)},mount:function(a,c){var g=a||{},e=c||{},f=function(){console.log("ERROR: stub called!");m()},f={override:f,clear:f,get:E,get_key:J,get_path:t,set:r,set_path:D,update:G,lock:K,
unlock:H};g.log_level=g.log_level||-1;q=g.control;e.flocks2Config=g;d=e;b(1,"Flocks2 root creation begins");if(!q)throw"Flocks2 fatal error: must provide a control in create/2 FlocksConfig";g.handler&&(x=g.handler,b(3," - Flocks2 handler assigned"));g.finalizer&&(y=g.finalizer,b(3," - Flocks2 finalizer assigned"));g.preventAutoContext?b(2," - Flocks2 skipping auto-context"):(b(2," - Flocks2 engaging auto-context"),this.fctx=u(d));b(3,"Flocks2 creation finished; initializing");w=!0;m();b(3,"Flocks2 expose updater");
this.fupd=f;this.fset=f.set;this.fgetkey=f.get_key;this.fgetpath=f.get_path;this.flock=f.lock;this.funlock=f.unlock;this.fupdate=f.update;b(3,"Flocks2 initialization finished");return f},clone:u,isArray:h,isUndefined:l,isNonArrayObject:v,enforceString:z,enforceArray:A,enforceNonArrayObject:B,atLeastFlocks:I,plumbing:p};"undefined"!==typeof module?module.exports=k:window.flocks=k})();
